<%- include('partials/header') -%>

  <!-- main -->
  <section class="section container blue lighten-5" id="main">
    <div class="row">
      <h5 class="teal-text">My Questions</h5>
      <p>Below are all of the multiple-choice questions that you have created.</p>
      <p>You can write a new question on the <a href="multiple-choice" target="_blank">create <i class="tiny material-icons">open_in_new</i></a> page.</p>
      <p>Review the <a href="tutorials-mc" target="_blank">tutorial <i class="tiny material-icons">open_in_new</i></a> for help.</p>
    </div>
    <div class="row">
      <% if (questions.length === 0) { %>
        <p>No questions created yet - try creating one.</p>
      <% } else { %>
        <% questions.forEach(q => { %>
          <div class="col s6 m4 l3">
            <div class="card">
              <div class="card-image waves-effect waves-block waves-light">
                <img class="activator" src="multiple-choice.png">
              </div>
              <div class="card-content">
                <span class="card-title activator grey-text text-darken-4"><%= q.question.name %><i class="material-icons right">more_vert</i></span>
              </div>
              <div class="card-reveal">
                <span class="card-title grey-text text-darken-4">Options<i class="material-icons right">close</i></span>
                <div>
                  <ul class="collection">
                    <li class="collection-item"><div>Preview<a href="#previewModal" class="secondary-content modal-trigger" 
                      onClick="previewMyQuestion(
                        '<%= q.question.name %>', 
                      '<%= q.question.type %>', 
                      '<%= q.question.marks %>',
                      '<%= q.question.questionText %>',
                      '<%= q.question.correctAnswers %>',
                      '<%= q.question.incorrectAnswers %>'
                      );"> <!-- Passing q.question does not work - have to pass individual values -->
                      <i class="material-icons">assignment_turned_in</i></a></div></li>
                    <li class="collection-item"><div>Edit<a href="#!" class="secondary-content"><i class="material-icons">edit</i></a></div></li>
                    <li class="collection-item"><div>Delete<a href="#!" class="secondary-content" onClick="deleteQuestion('<%= q._id %>');"><i class="material-icons">delete</i></a></div></li>
                    <li class="collection-item"><div>Template<a href="#!" class="secondary-content"><i class="material-icons">content_copy</i></a></div></li>
                    <li class="collection-item"><div>Share<a href="#!" class="secondary-content"><i class="material-icons">send</i></a></div></li>
                  </ul>
                </div>
              </div>
            </div>
          </div> 
        <% }) %>
      <% } %>
    </div>
  </section>

  <!-- Preview Modal -->
  <div id="previewModal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <h4>Question Preview</h4>
      <div id="previewModalContent"></div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">CLOSE</a>
    </div>
  </div>

<%- include('partials/footer') -%>
<script src="mc-script.js"></script>
</body>
</html>